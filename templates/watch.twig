<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex,nofollow,noarchive">

  {% for key, value in og %}
  <meta property="og:{{ key }}" content="{{ value|e('html_attr') }}" />
  {% endfor %}

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  {% include 'partials/videojs-includes.twig' %}
  {% include 'partials/videojs-plugins.twig' %}

  <link href="assets/css/style.css" rel="stylesheet">
  <link href="{{ og.image }}" rel="image_src">
  <link rel="alternate" type="application/json+oembed" href="{{ og.url|replace({'watch': 'oembed'}) }}" title="oEmbed JSON">
  <link rel="alternate" type="text/xml+oembed" href="{{ og.url|replace({'watch': 'oembed'}) }}&format=xml" title="oEmbed XML">

  <script defer src="assets/js/mytube.js"></script>

  <title>{{ video.title|e }}</title>
</head>
<body>

  <header>
    <img src="assets/img/logo.png" alt="Logo">
    <h1>MyTube</h1>
  </header>

  <main>
  <section class="video-section">
    <div class="video-container">
      <div class="video-wrapper" style="position: relative; width: 100%; padding-top: {{ (video.aspect_ratio * 100) }}%;">
        <video id="video-player" class="video-js" controls preload="auto"
          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
          data-src="{{ video.encoded_video }}"
          data-thumb="{{ video.encoded_thumbnail }}">
        </video>
      </div>
    </div>
    <div class="video-meta">
      <h2>{{ video.title|e }}</h2>
      <div class="video-actions">
        {# <span class="author">{{ video.author|e }}</span> #}
        <div class="actions">
          <button id="share-btn" class="material-icons" title="Share">share</button>
          <button id="embed-btn" class="material-icons" title="Embed">code</button>
        </div>
      </div>
    </div>

    <div class="video-description">
      {{ video.description }}
    </div>

  </section>

  <aside class="sidebar">
    <div class="section">
      <h3>Dans la même collection</h3>
      <div class="related-videos">
{% for altvid in seealso %}
        <a href="watch?v={{ altvid.id|url_encode }}" class="video-card">
          <img src="thumbs/{{ altvid.id|url_encode }}.jpg" alt="">
          <span>{{ altvid.title|e }}</span>
        </a>
{% endfor %}
      </div>
    </div>
    {% if bmc_enabled and bmc_slug %}
    <div class="section">
      <h3>Soutenez mon travail</h3>

      <script src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js"
        data-name="bmc-button" data-slug="{{ bmc_slug|e('html_attr') }}" data-color="#FFDD00"
        data-emoji="" data-font="Cookie" data-text="{{ bmc_button_text|e('html_attr') }}"
        data-outline-color="#000000" data-font-color="#000000"
        data-coffee-color="#ffffff"></script>
    </div>
    {% endif %}
  </aside>
  </main>

  {% if footer_copyright %}
  <footer>
    {{ footer_copyright|raw }}
  </footer>
  {% endif %}

<div id="embed-modal" class="modal" hidden>
  <div class="modal-backdrop" data-close></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h3>Intégrer cette vidéo</h3>
    <textarea id="embed-code" readonly>
&lt;div style="position: relative; width: 100%; aspect-ratio: 16 / 9; overflow: hidden; background: #000;"&gt;
    &lt;iframe
        src="{{ og.url|replace({'watch': 'embed'}) }}"
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"
        frameborder="0"
        allowfullscreen&gt;
    &lt;/iframe&gt;
&lt;/div&gt;
    </textarea>
    <button id="copy-embed">Copier</button>
    <button data-close>Fermer</button>
  </div>
</div>

</body>
</html>
